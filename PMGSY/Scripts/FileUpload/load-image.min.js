(function(n){"use strict";var t=function(n,i,r){var u=document.createElement("img"),f,e;return(u.onerror=i,u.onload=function(){!e||r&&r.noRevoke||t.revokeObjectURL(e),i(t.scale(u,r))},window.Blob&&n instanceof Blob||window.File&&n instanceof File?(f=e=t.createObjectURL(n),u._type=n.type):f=n,f)?(u.src=f,u):t.readFile(n,function(n){var t=n.target;t&&t.result?u.src=t.result:i(n)})},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.detectSubsampling=function(n){var r=n.width,u=n.height,t,i;return r*u>1048576?(t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(n,-r+1,0),i.getImageData(0,0,1,1).data[3]===0):!1},t.detectVerticalSquash=function(n,t){var u=document.createElement("canvas"),e=u.getContext("2d"),o,r,f,i,s;for(u.width=1,u.height=t,e.drawImage(n,0,0),o=e.getImageData(0,0,1,t).data,r=0,f=t,i=t;i>r;)s=o[(i-1)*4+3],s===0?f=i:r=i,i=f+r>>1;return i/t},t.renderImageToCanvas=function(n,i,r,u){var h=n.width,e=n.height,a=i.getContext("2d"),v,f=1024,c=document.createElement("canvas"),l,o,y,s,p;for(a.save(),t.detectSubsampling(n)&&(h/=2,e/=2),v=t.detectVerticalSquash(n,e),c.width=c.height=f,l=c.getContext("2d"),o=0;o<e;){for(y=o+f>e?e-o:f,s=0;s<h;)p=s+f>h?h-s:f,l.clearRect(0,0,f,f),l.drawImage(n,-s,-o),a.drawImage(c,0,0,p,y,Math.floor(s*r/h),Math.floor(o*u/e/v),Math.ceil(p*r/h),Math.ceil(y*u/e/v)),s+=f;o+=f}a.restore(),c=l=null},t.scale=function(n,i){i=i||{};var e=document.createElement("canvas"),r=n.width,u=n.height,f=Math.max((i.minWidth||r)/r,(i.minHeight||u)/u);return(f>1&&(r=parseInt(r*f,10),u=parseInt(u*f,10)),f=Math.min((i.maxWidth||r)/r,(i.maxHeight||u)/u),f<1&&(r=parseInt(r*f,10),u=parseInt(u*f,10)),n.getContext||i.canvas&&e.getContext)?(e.width=r,e.height=u,n._type==="image/jpeg"?t.renderImageToCanvas(n,e,r,u):e.getContext("2d").drawImage(n,0,0,r,u),e):(n.width=r,n.height=u,n)},t.createObjectURL=function(n){return i?i.createObjectURL(n):!1},t.revokeObjectURL=function(n){return i?i.revokeObjectURL(n):!1},t.readFile=function(n,t){if(window.FileReader&&FileReader.prototype.readAsDataURL){var i=new FileReader;return i.onload=i.onerror=t,i.readAsDataURL(n),i}return!1},typeof define=="function"&&define.amd?define(function(){return t}):n.loadImage=t})(this);
//@ sourceMappingURL=load-image.min.js.map